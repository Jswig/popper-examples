steps:
- id: "dataset"
  uses: "docker://jacobcarlborg/docker-alpine-wget"
  args: ["sh", "src/get_data.sh", "data"]

- id: "rstudio"
  uses: "./"
  args: ["r", "--version"]
  env: {DISABLE_AUTH: "true"}
  options:
    ports:
      8787: 8787
    
- id: "figures"
  uses: "./"
  args: ["Rscript", "evaluate_model.R"]
  dir: "/workspace/src"

- id: "predict"
  uses: "./"
  args: ["Rscript", "predict.R"]
  dir: "/workspace/src"

- id: "paper"
  uses: "./" 
  args: ["latexmk", "-pdf", "paper.tex"]
  dir: "/workspace/paper"